{"ast":null,"code":"export default {\n  name: \"Manager\",\n\n  data() {\n    return {\n      queryInfo: {\n        query: ''\n      },\n      // 获取用户列表数据,存放到userList中,查询条数放到total中\n      userList: [{\n        username: 'czf'\n      }],\n      total: 0,\n      addUserForm: {\n        username: '',\n        password: ''\n      },\n      addUserFormRules: {\n        username: [{\n          required: true,\n          message: '请输入合法的用户名',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 10,\n          message: '用户名的长度在3-10个字符之间',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '请输入合法的密码',\n          trigger: 'blur'\n        }, {\n          min: 6,\n          max: 15,\n          message: '密码的长度在6-15个字符之间',\n          trigger: 'blur'\n        }]\n      },\n      addDialogVisible: false\n    };\n  },\n\n  created() {\n    this.getUserList();\n  },\n\n  methods: {\n    exits() {\n      this.$router.push({\n        path: '/'\n      });\n    },\n\n    addDialogClosed() {\n      this.$refs.addUserFormRef.resetFields();\n    },\n\n    back() {\n      this.$router.push({\n        path: 'MAIN-INTER'\n      });\n    },\n\n    addUser() {\n      this.axios.post('http://localhost:5000/adduser', this.addUserForm).then(resp => {\n        let data = resp.data;\n\n        if (data.toString() == \"true\") {\n          this.$message({\n            message: '添加成功',\n            type: 'success'\n          }); // 隐藏添加用户的对话框\n\n          this.addDialogVisible = false; // 重新获取用户列表\n\n          this.getUserList();\n        } else {\n          this.$message.error('添加失败');\n        }\n      });\n    },\n\n    async getUserList() {\n      this.axios.get('http://localhost:5000/listUser').then(function (res) {\n        console.log(res); // this.$store.state.allDatas = response.data;\n        // console.log(this.$store.state.allDatas)\n\n        console.log(res.data);\n        let arr = res.data.join(',');\n        console.log(arr);\n        this.userList.username = arr;\n      });\n    },\n\n    // 根据Id删除用户\n    async removeUserById(id) {\n      const confirmRes = await this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).catch(err => err); // 如果用户确认删除，返回confirm\n      // 如果用户取消删除，返回cancel\n\n      if (confirmRes !== 'confirm') {\n        return this.$message.info('已取消删除');\n      }\n\n      const {\n        data: res\n      } = await this.$http.delete('users/' + id);\n\n      if (res.meta.status !== 200) {\n        return this.$message.error('删除用户失败！');\n      }\n\n      this.$message.success('删除用户成功！');\n      this.getUserList();\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA6HA;EACAA,eADA;;EAEAC;IACA;MACAC;QACAC;MADA,CADA;MAIA;MACAC;QACAC;MADA,EALA;MAQAC,QARA;MASAC;QACAF,YADA;QAEAG;MAFA,CATA;MAaAC;QACAJ,WACA;UAAAK;UAAAC;UAAAC;QAAA,CADA,EAEA;UACAC,MADA;UAEAC,OAFA;UAGAH,2BAHA;UAIAC;QAJA,CAFA,CADA;QAUAJ,WACA;UAAAE;UAAAC;UAAAC;QAAA,CADA,EAEA;UACAC,MADA;UAEAC,OAFA;UAGAH,0BAHA;UAIAC;QAJA,CAFA;MAVA,CAbA;MAkCAG;IAlCA;EAoCA,CAvCA;;EAwCAC;IACA;EACA,CA1CA;;EA2CAC;IACAC;MACA;QAAAC;MAAA;IACA,CAHA;;IAIAC;MACA;IACA,CANA;;IAOAC;MACA;QAAAF;MAAA;IACA,CATA;;IAUAG;MAEA;QACA;;QACA;UACA;YACAX,eADA;YAEAY;UAFA,GADA,CAKA;;UACA,8BANA,CAOA;;UACA;QACA,CATA,MASA;UACA;QACA;MACA,CAdA;IAeA,CA3BA;;IA4BA;MAEA;QACAC,iBADA,CAEA;QACA;;QACAA;QACA;QACAA;QACA;MACA,CARA;IAUA,CAxCA;;IAyCA;IACA;MACA,uCACA,oBADA,EAEA,IAFA,EAGA;QACAC,uBADA;QAEAC,sBAFA;QAGAH;MAHA,CAHA,EAQAI,KARA,CAQAC,UARA,EADA,CAUA;MACA;;MACA;QACA;MACA;;MACA;QAAA3B;MAAA;;MACA;QACA;MACA;;MACA;MACA;IACA;;EA/DA;AA3CA","names":["name","data","queryInfo","query","userList","username","total","addUserForm","password","addUserFormRules","required","message","trigger","min","max","addDialogVisible","created","methods","exits","path","addDialogClosed","back","addUser","type","console","confirmButtonText","cancelButtonText","catch","err"],"sourceRoot":"src/views","sources":["Manager.vue"],"sourcesContent":["<template>\r\n        <el-container>\r\n  <el-aside width=\"200px\" class=\"managerAside\">\r\n      <img src=\"../assets/th2.png\" alt=\"\" class=\"logo\"/>\r\n      <div class=\"gl2\">\r\n          <el-dropdown>\r\n               <span class=\"el-dropdown-link\">\r\n            用户管理<i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n          </span>\r\n      <el-dropdown-menu slot=\"dropdown\">\r\n          <el-dropdown-item @click.native=\"back()\">首页</el-dropdown-item>\r\n  </el-dropdown-menu>\r\n</el-dropdown>\r\n      </div>\r\n      <div class=\"gl\">\r\n      <el-dropdown>\r\n               <span class=\"el-dropdown-link\">\r\n            团队成员<i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n          </span>\r\n      <el-dropdown-menu slot=\"dropdown\">\r\n          <el-dropdown-item>项目经理：解世超</el-dropdown-item>\r\n          <el-dropdown-item>服务端工程师：何毅</el-dropdown-item>\r\n          <el-dropdown-item>服务端工程师：江顺</el-dropdown-item>\r\n          <el-dropdown-item>客户端工程师：陈泽锋</el-dropdown-item>\r\n          <el-dropdown-item>客户端工程师：蒋涵</el-dropdown-item>\r\n          <el-dropdown-item>数据库工程师：贺思超</el-dropdown-item>\r\n  </el-dropdown-menu>\r\n</el-dropdown>\r\n      </div>\r\n  </el-aside>\r\n  <el-container>\r\n    <el-header class=\"managerHead\">\r\n        <i class=\"el-icon-help\">航班延误预测系统</i>\r\n        <div>\r\n            <el-dropdown>\r\n               <span class=\"el-dropdown-link\">\r\n            个人中心</span>\r\n      <el-dropdown-menu slot=\"dropdown\">\r\n          <el-dropdown-item @click.native=\"exits\">退出</el-dropdown-item>\r\n  </el-dropdown-menu>\r\n</el-dropdown>\r\n        </div>\r\n    </el-header>\r\n    <el-main class=\"managerMain\">\r\n         <!--面包屑导航区域-->\r\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n            <el-breadcrumb-item :to=\"{ path: '/MAIN-INTER' }\" class=\"head-bread\">首页</el-breadcrumb-item>\r\n            <el-breadcrumb-item class=\"head-bread\">用户管理</el-breadcrumb-item>\r\n            <el-breadcrumb-item class=\"head-bread\">用户列表</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n        <el-card class=\"box-card\">\r\n            <el-row :gutter=\"20\">\r\n        <!-- 搜索 clearable:清空数据，@clear:查询数据-->\r\n        <el-col :span=\"8\">\r\n          <el-input\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"queryInfo.query\"\r\n            clearable\r\n            @clear=\"getUserList\"\r\n          >\r\n            <el-button\r\n              slot=\"append\"\r\n              icon=\"el-icon-search\"\r\n              @click=\"getUserList\"\r\n            ></el-button> </el-input\r\n        ></el-col>\r\n        <!-- 添加用户 -->\r\n        <el-col :span=\"4\"\r\n          ><el-button type=\"primary\" @click=\"addDialogVisible = true\"\r\n            >添加用户</el-button\r\n          >\r\n          <!-- 添加用户对话框 -->\r\n          <el-dialog\r\n            title=\"添加用户\"\r\n            :visible.sync=\"addDialogVisible\"\r\n            width=\"50%\"\r\n            @close=\"addDialogClosed\"\r\n          >\r\n            <!-- 添加用户内容主体区域 -->\r\n            <el-form\r\n              v-model=\"addUserForm\"\r\n              v-rules=\"addUserFormRules\"\r\n              ref=\"addUserFormRef\"\r\n              label-width=\"70px\"\r\n            >\r\n              <el-form-item label=\"用户名\" prop=\"username\">\r\n                <el-input v-model=\"addUserForm.username\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"密码\" prop=\"password\">\r\n                <el-input v-model=\"addUserForm.password\"></el-input>\r\n              </el-form-item>\r\n             </el-form>\r\n            <!-- 添加用户内容底部区域 -->\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button @click=\"addDialogVisible = false\">取 消</el-button>\r\n              <el-button type=\"primary\" @click=\"addUser\">确 定</el-button>\r\n            </span>\r\n          </el-dialog>\r\n        </el-col></el-row>\r\n            <el-table :data=\"userList\" border stripe>\r\n        <el-table-column type=\"index\"></el-table-column>\r\n        <el-tableColumn label=\"姓名\" prop=\"username\"></el-tableColumn>\r\n        <el-tableColumn label=\"操作\" width=\"180px\">\r\n          <!-- eslint-disable-next-line -->\r\n          <template slot-scope=\"scope\">\r\n\r\n            <!-- 删除用户按钮 -->\r\n            <el-button\r\n              type=\"danger\"\r\n              icon=\"el-icon-delete\"\r\n              size=\"mini\"\r\n              @click=\"removeUserById(scope.row.id)\"\r\n            ></el-button>\r\n            </template></el-tableColumn>\r\n      </el-table>\r\n        </el-card>\r\n    </el-main>\r\n      <el-footer class=\"managerFoot\">\r\n          <div class=\"kaifa\">国寄纵队小组开发出品</div>\r\n      </el-footer>\r\n  </el-container>\r\n</el-container>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"Manager\",\r\n        data() {\r\n            return {\r\n                queryInfo: {\r\n                query: '',\r\n              },\r\n                 // 获取用户列表数据,存放到userList中,查询条数放到total中\r\n                userList: [{\r\n                    username:'czf',\r\n                }],\r\n                total: 0,\r\n                addUserForm: {\r\n                username: '',\r\n                password: '',\r\n              },\r\n                 addUserFormRules: {\r\n                    username: [\r\n                  { required: true, message: '请输入合法的用户名', trigger: 'blur' },\r\n                  {\r\n                    min: 3,\r\n                    max: 10,\r\n                    message: '用户名的长度在3-10个字符之间',\r\n                    trigger: 'blur',\r\n                  },\r\n                ],\r\n                password: [\r\n                  { required: true, message: '请输入合法的密码', trigger: 'blur' },\r\n                  {\r\n                    min: 6,\r\n                    max: 15,\r\n                    message: '密码的长度在6-15个字符之间',\r\n                    trigger: 'blur',\r\n                  },\r\n                ],\r\n\r\n                 },\r\n                addDialogVisible: false,\r\n            }\r\n        },\r\n        created() {\r\n                    this.getUserList()\r\n                  },\r\n        methods: {\r\n            exits(){\r\n                this.$router.push({path: '/'})\r\n            },\r\n            addDialogClosed() {\r\n                this.$refs.addUserFormRef.resetFields()\r\n            },\r\n            back(){\r\n                this.$router.push({path: 'MAIN-INTER'})\r\n            },\r\n            addUser() {\r\n\r\n                    this.axios.post('http://localhost:5000/adduser',this.addUserForm).then((resp) =>{\r\n                    let data = resp.data;\r\n                    if(data.toString()==\"true\"){\r\n                this.$message({\r\n                    message: '添加成功',\r\n                    type: 'success'\r\n                });\r\n                    // 隐藏添加用户的对话框\r\n                    this.addDialogVisible = false\r\n                    // 重新获取用户列表\r\n                    this.getUserList()\r\n                    }else{\r\n                        this.$message.error('添加失败');\r\n                    }\r\n                })\r\n                  },\r\n             async getUserList() {\r\n\r\n                      this.axios.get('http://localhost:5000/listUser').then(function (res) {\r\n                      console.log(res)\r\n                      // this.$store.state.allDatas = response.data;\r\n                      // console.log(this.$store.state.allDatas)\r\n                      console.log(res.data)\r\n                      let arr = res.data.join(',');\r\n                      console.log(arr)\r\n                      this.userList.username = arr;\r\n                       })\r\n\r\n                    },\r\n            // 根据Id删除用户\r\n            async removeUserById(id) {\r\n              const confirmRes = await this.$confirm(\r\n                '此操作将永久删除该用户, 是否继续?',\r\n                '提示',\r\n                {\r\n                  confirmButtonText: '确定',\r\n                  cancelButtonText: '取消',\r\n                  type: 'warning',\r\n                }\r\n              ).catch((err) => err)\r\n              // 如果用户确认删除，返回confirm\r\n              // 如果用户取消删除，返回cancel\r\n              if (confirmRes !== 'confirm') {\r\n                return this.$message.info('已取消删除')\r\n              }\r\n              const { data: res } = await this.$http.delete('users/' + id)\r\n              if (res.meta.status !== 200) {\r\n                return this.$message.error('删除用户失败！')\r\n              }\r\n              this.$message.success('删除用户成功！')\r\n              this.getUserList()\r\n            },\r\n\r\n\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n     .head-bread{\r\n        position: relative;\r\n         color: #fff;\r\n         font-size: 20px;\r\n         line-height:1.7;\r\n    }\r\n     .el-dropdown-link {\r\n        cursor: pointer;\r\n        color: #fff;\r\n         font-size: 30px;\r\n         line-height:1.7;\r\n      }\r\n      .el-icon-arrow-down {\r\n        font-size: 30px;\r\n      }\r\n     .gl{\r\n        text-align: center;\r\n    }\r\n    .gl2{\r\n        text-align: center;\r\n    }\r\n    .logo{\r\n        max-width:100%;\r\n        height:auto;\r\n    }\r\n    .kaifa{\r\n        margin:0px auto 40px auto;\r\n        text-align: center;\r\n        font-size: 20px;\r\n        line-height:60px;\r\n        color: #fff;\r\n        font-family: \"Helvetica Neue\";\r\n    }\r\n    .el-icon-help{\r\n        text-align: center;\r\n        font-size: 35px;\r\n        color: #fff;\r\n        font-family: \"Helvetica Neue\";\r\n        line-height:1.7;\r\n    }\r\n    .managerHead{\r\n        background: #409EFF;\r\n        display: flex;\r\n        justify-content: space-between;\r\n    }\r\n    .managerAside{\r\n        width: 1000px;\r\n        background: #4169E1;\r\n    }\r\n    .managerMain{\r\n        background: #87CEFA;\r\n        height:800px;\r\n        flex-grow:1;\r\n        background-image: url(\"../assets/bg.jpg\");\r\n        background-size:cover;\r\n        background-repeat: no-repeat;\r\n    }\r\n    .managerFoot{\r\n        background: #409EFF;\r\n    }\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}