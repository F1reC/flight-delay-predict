{"ast":null,"code":"import Vue from \"vue\";\nimport echarts from \"echarts\";\nVue.prototype.$echarts = echarts;\nimport china from \"echarts/map/json/china.json\";\necharts.registerMap(\"china\", china);\nexport default {\n  name: \"main\",\n\n  data() {\n    return {\n      mainForm: {\n        showmsg: '',\n        showemsg: '',\n        value1: ''\n      },\n      adminForm: {\n        username: this.$route.query.username\n      },\n      buttonShow: false,\n      count: 0,\n      thehint: \"请选择出发机场\",\n      msg: \"请选择\",\n      emsg: \"请选择\",\n      activeNames: ['0'],\n      dateList: [],\n      normalList: [],\n      mildList: [],\n      moderateListe: [],\n      seriousList: [],\n      totalList: []\n    };\n  },\n\n  mounted() {\n    this.getMapChart();\n  },\n\n  methods: {\n    openMsgHint(msg, data1) {\n      this.$confirm('是否选择' + msg + '为出发机场', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$message({\n          type: 'success',\n          message: '选择成功!'\n        });\n        this.msg = msg;\n        this.mainForm.showmsg = this.getCode(data1, msg);\n        console.log(this.getCode(data1, msg));\n        this.thehint = \"请选择目的机场\";\n        console.log('success');\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消选择'\n        });\n      });\n    },\n\n    openEMsgHint(msg, data1) {\n      this.$confirm('是否选择' + msg + '为目的机场', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$message({\n          type: 'success',\n          message: '选择成功!'\n        });\n        this.emsg = msg;\n        this.mainForm.showemsg = this.getCode(data1, msg);\n        console.log(this.getCode(data1, msg));\n        this.thehint = \"请选择时间\";\n        console.log('success');\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消选择'\n        });\n      });\n    },\n\n    handleChange(val) {\n      console.log(val);\n    },\n\n    timeSelected() {\n      alert(\"change\");\n\n      if (this.msg != \"请选择\" && this.emsg != \"请选择\") {\n        this.thehint = \"请点击确认\";\n        this.buttonShow = true;\n      }\n    },\n\n    toCancel() {\n      alert(\"取消\");\n      this.count = 0;\n      this.thehint = \"请选择出发机场\";\n      this.msg = \"请选择\", this.emsg = \"请选择\";\n      return;\n    },\n\n    sure() {\n      alert(\"确定\");\n      this.axios.post('http://localhost:5000/delayPredict', this.mainForm).then(resp => {\n        let data = resp.data;\n        let that = this;\n        that.dateList = resp.data.date;\n        that.normalList = resp.data.normal_prob;\n        that.mildList = resp.data.mild_prob;\n        let tempList = [];\n\n        for (let i = 0; i < 7; i++) {}\n\n        console.log(resp.data.normal_prob); // // for( let i =0; i<15; i++){\n        // //     console.log(data1[0][i].toString());\n        // // }\n        // if(data.toString()!= null){\n        //     this.axios.post('http://localhost:5000/setArriveAirport',this.mainForm).then((resp)=>{\n        //         let data = resp.data;\n        //         if(data.toString()==\"true\"){\n        //             this.axios.post('http://localhost:5000/delayPredict',this.mainForm).then((resp)=>{\n        //                 let data = resp.data;\n        //                 console.log(data);\n        //             })\n        //         }\n        //         this.$message({\n        //             message: '选择成功',\n        //             type: 'success'\n        //         });\n        //     })\n        // }\n      });\n    },\n\n    checkadd() {\n      this.axios.post('http://localhost:5000/judgeAdmin', this.adminForm).then(resp => {\n        let data = resp.data;\n\n        if (data.toString() == \"true\") {\n          this.$router.push({\n            path: '/Manager'\n          });\n        } else {\n          this.$message({\n            message: '你没有权限',\n            type: 'error'\n          });\n        }\n      });\n    },\n\n    exits() {\n      this.$router.push({\n        path: '/'\n      });\n    },\n\n    getMapChart() {\n      var hintGroup = this.getHint();\n      var dataValue = this.dealWithData();\n      var data1 = dataValue.splice(0, 27);\n      var myChart = this.$echarts.init(document.getElementById(\"mapChart\"));\n      var option = {\n        tooltip: {\n          show: false\n        },\n        backgroundColor: \"rgba(0,0,0,0)\",\n        geo: {\n          map: \"china\",\n          roam: false,\n          // 一定要关闭拖拽\n          zoom: 1.23,\n          center: [105, 36],\n          // 调整地图位置\n          label: {\n            normal: {\n              show: false,\n              //关闭省份名展示\n              fontSize: \"10\",\n              color: \"rgba(0,0,0,0.7)\"\n            },\n            emphasis: {\n              show: false\n            }\n          },\n          itemStyle: {\n            normal: {\n              areaColor: \"#0d0059\",\n              borderColor: \"#389dff\",\n              borderWidth: 1,\n              //设置外层边框\n              shadowBlur: 5,\n              shadowOffsetY: 8,\n              shadowOffsetX: 0,\n              shadowColor: \"#01012a\"\n            },\n            emphasis: {\n              areaColor: \"#184cff\",\n              shadowOffsetX: 0,\n              shadowOffsetY: 0,\n              shadowBlur: 5,\n              borderWidth: 0,\n              shadowColor: \"rgba(0, 0, 0, 0.5)\"\n            }\n          }\n        },\n        legend: {\n          orient: \"horizontal\",\n          height: \"50%\",\n          top: \"0%\",\n          right: \"10%\"\n        },\n        series: [{\n          type: \"map\",\n          map: \"china\",\n          roam: false,\n          zoom: 1.23,\n          center: [105, 36],\n          // geoIndex: 1,\n          // aspectScale: 0.75, //长宽比\n          showLegendSymbol: false,\n          // 存在legend时显示\n          label: {\n            // 显示地图省名称\n            normal: {\n              color: \"#389dff\",\n              formatter: \"{b}\",\n              position: [-12, -1],\n              show: false\n            },\n            emphasis: {\n              show: false\n            }\n          },\n          itemStyle: {\n            normal: {\n              areaColor: \"#0d0059\",\n              borderColor: \"#389dff\",\n              borderWidth: 0.5\n            },\n            emphasis: {\n              areaColor: \"#17008d\",\n              shadowOffsetX: 0,\n              shadowOffsetY: 0,\n              shadowBlur: 5,\n              borderWidth: 0,\n              shadowColor: \"rgba(0, 0, 0, 0.5)\"\n            }\n          }\n        }, {\n          name: \"\",\n          type: \"scatter\",\n          coordinateSystem: \"geo\",\n          data: dataValue,\n          symbol: \"circle\",\n          symbolSize: 5,\n          hoverSymbolSize: 10,\n          tooltip: {\n            formatter(value) {\n              return value.data.name + \"<br/>\";\n            },\n\n            show: true\n          },\n          encode: {\n            value: 2\n          },\n          label: {\n            formatter: \"{b}\",\n            position: \"right\",\n            show: false\n          },\n          itemStyle: {\n            color: \"#0efacc\"\n          },\n          emphasis: {\n            label: {\n              show: false\n            }\n          }\n        }, {\n          name: \"显示所有机场\",\n          type: \"effectScatter\",\n          coordinateSystem: \"geo\",\n          data: data1,\n          textColor: \"#000\",\n          symbolSize: 8,\n          tooltip: {\n            formatter(value) {\n              return value.data.name + \"<br/>\" // + \"门店数：\" + value.data.value[2]\n              ;\n            },\n\n            show: true\n          },\n          encode: {\n            value: 2\n          },\n          showEffectOn: \"render\",\n          rippleEffect: {\n            brushType: \"stroke\",\n            color: \"#0efacc\",\n            period: 9,\n            scale: 5\n          },\n          hoverAnimation: true,\n          label: {\n            formatter: \"{b}\",\n            position: \"right\",\n            show: true\n          },\n          itemStyle: {\n            color: \"#0efacc\",\n            shadowBlur: 2,\n            shadowColor: \"#333\"\n          },\n          zlevel: 1\n        }]\n      };\n      myChart.setOption(option);\n      myChart.on(\"click\", params => {\n        console.log(params.seriesType);\n\n        if (params.seriesType == \"effectScatter\") {\n          if (this.thehint == \"请选择出发机场\") {\n            this.openMsgHint(params.name, data1);\n          } else if (this.thehint == \"请选择目的机场\") {\n            this.openEMsgHint(params.name, data1);\n          } else if (this.thehint == \"请点击确认\") {\n            alert(\"请点击确定或取消\");\n            this.buttonShow = false;\n          }\n        }\n\n        return;\n        this.$router.push({\n          path: \"/mapEchartProvince\",\n          query: {\n            provinceName: params.data.ename,\n            province: params.name\n          }\n        });\n      });\n      myChart.setOption(option);\n\n      window.onresize = () => {\n        myChart.resize();\n      };\n    },\n\n    getHint() {\n      var hintsGroup = [\"请选择出发机场\", \"请选择目的机场\", \"请点击确定\"];\n      return hintsGroup;\n    },\n\n    dealWithData() {\n      var geoCoordMap = [{\n        name: \"罗家机场\",\n        value: [117.18, 29.27, \"JDZ\"]\n      }, {\n        name: \"浦东机场\",\n        value: [121.80, 31.16, \"PVG\"]\n      }, {\n        name: \"通辽机场\",\n        value: [122.256, 43.62, \"TGO\"]\n      }, {\n        name: \"高崎国际机场\",\n        value: [118.03, 24.48, \"XMN\"]\n      }, {\n        name: \"地窝堡国际机场\",\n        value: [88.31, 43.36, \"URC\"]\n      }, {\n        name: \"武宿国际机场\",\n        value: [112.487, 37.94, \"TYN\"]\n      }, {\n        name: \"宝安机场\",\n        value: [113.88, 22.55, \"SZX\"]\n      }, {\n        name: \"凤凰国际机场\",\n        value: [109.75, 18.4, \"SYX\"]\n      }, {\n        name: \"流亭国际机场\",\n        value: [120.396, 36.9, \"TAO\"]\n      }, {\n        name: \"遥墙国际机场\",\n        value: [116.75, 35.8, \"TNA\"]\n      }, {\n        name: \"正定机场\",\n        value: [115.0, 40.03, \"SJW\"]\n      }, {\n        name: \"桃仙国际机场\",\n        value: [123.47, 41.8, \"SHE\"]\n      }, {\n        name: \"虹桥机场\",\n        value: [122.34, 30.196, \"SHA\"]\n      }, {\n        name: \"首都国际机场\",\n        value: [116.35, 39.04, \"PEK\"]\n      }, {\n        name: \"禄口国际机场\",\n        value: [119.89, 32.33, \"NKG\"]\n      }, {\n        name: \"两江国际机场\",\n        value: [110.3, 25.3, \"KWL\"]\n      }, {\n        name: \"长水国际机场\",\n        value: [101.82, 24.9, \"KMG\"]\n      }, {\n        name: \"太平机场\",\n        value: [126.96, 45.55, \"HRB\"]\n      }, {\n        name: \"白塔机场\",\n        value: [111.62, 40.8, \"HET\"]\n      }, {\n        name: \"萧山国际机场\",\n        value: [120.21, 28.2, \"HGH\"]\n      }, {\n        name: \"长乐国际机场\",\n        value: [119.27, 26.04, \"FOC\"]\n      }, {\n        name: \"双流机场\",\n        value: [104.1, 30.66, \"CTU\"]\n      }, {\n        name: \"江北机场\",\n        value: [106.54, 29.4, \"CKG\"]\n      }, {\n        name: \"合肥机场\",\n        value: [117.3, 31.69, \"HFE\"]\n      }, {\n        name: \"新郑国际机场\",\n        value: [113.64, 34.72, \"CGO\"]\n      }, {\n        name: \"吐鲁番交河机场\",\n        value: [89.2, 40.94, \"TLQ\"]\n      }, {\n        name: \"天河机场\",\n        value: [114.03, 30.58, \"WUH\"]\n      }];\n      return geoCoordMap;\n    },\n\n    getCode(data2, name1) {\n      for (let i = 0; i < data2.length; i++) {\n        if (data2[i].name == name1) {\n          return data2[i].value[2];\n        }\n      }\n\n      return \"out\";\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["Vue","echarts","name","data","mainForm","showmsg","showemsg","value1","adminForm","username","buttonShow","count","thehint","msg","emsg","activeNames","dateList","normalList","mildList","moderateListe","seriousList","totalList","mounted","methods","openMsgHint","confirmButtonText","cancelButtonText","type","then","message","console","catch","openEMsgHint","handleChange","timeSelected","alert","toCancel","sure","that","checkadd","path","exits","getMapChart","tooltip","show","backgroundColor","geo","map","roam","zoom","center","label","normal","fontSize","color","emphasis","itemStyle","areaColor","borderColor","borderWidth","shadowBlur","shadowOffsetY","shadowOffsetX","shadowColor","legend","orient","height","top","right","series","showLegendSymbol","formatter","position","coordinateSystem","symbol","symbolSize","hoverSymbolSize","value","encode","textColor","showEffectOn","rippleEffect","brushType","period","scale","hoverAnimation","zlevel","myChart","query","provinceName","province","window","getHint","dealWithData","getCode"],"sourceRoot":"src/views","sources":["MAIN-INTER.vue"],"sourcesContent":["<template>\r\n        <el-container>\r\n  <el-aside width=\"200px\" class=\"mainAside\">\r\n      <img src=\"../assets/th2.png\" alt=\"\" class=\"logo\"/>\r\n      <div class=\"gl2\">\r\n          <el-dropdown>\r\n               <span class=\"el-dropdown-link\">\r\n            用户管理<i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n          </span>\r\n      <el-dropdown-menu slot=\"dropdown\">\r\n          <el-dropdown-item @click.native=\"checkadd()\">用户列表</el-dropdown-item>\r\n  </el-dropdown-menu>\r\n</el-dropdown>\r\n      </div>\r\n      <div class=\"gl\">\r\n      <el-dropdown>\r\n               <span class=\"el-dropdown-link\">\r\n            团队成员<i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n          </span>\r\n      <el-dropdown-menu slot=\"dropdown\">\r\n          <el-dropdown-item>项目经理：解世超</el-dropdown-item>\r\n          <el-dropdown-item>服务端工程师：何毅</el-dropdown-item>\r\n          <el-dropdown-item>服务端工程师：江顺</el-dropdown-item>\r\n          <el-dropdown-item>客户端工程师：陈泽锋</el-dropdown-item>\r\n          <el-dropdown-item>客户端工程师：蒋涵</el-dropdown-item>\r\n          <el-dropdown-item>数据库工程师：贺思超</el-dropdown-item>\r\n  </el-dropdown-menu>\r\n</el-dropdown>\r\n      </div>\r\n  </el-aside>\r\n  <el-container>\r\n    <el-header class=\"mainHead\">\r\n        <i class=\"el-icon-help\">航班延误预测系统</i>\r\n        <div>\r\n            <el-dropdown>\r\n               <span class=\"el-dropdown-link\">\r\n            个人中心</span>\r\n      <el-dropdown-menu slot=\"dropdown\">\r\n          <el-dropdown-item @click.native=\"exits\">退出</el-dropdown-item>\r\n  </el-dropdown-menu>\r\n</el-dropdown>\r\n        </div>\r\n    </el-header>\r\n    <el-main class=\"mainMain\">\r\n         <!--面包屑导航区域-->\r\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n          <el-breadcrumb-item :to=\"{ path: '/MAIN-INTER' }\" class=\"head-bread\">首页</el-breadcrumb-item>\r\n        </el-breadcrumb>\r\n        <div class=\"chartBox\">\r\n    <div id=\"mapChart\" ></div>\r\n       </div>\r\n        <el-divider content-position=\"center\" style=\"position: relative;\"></el-divider>\r\n        <div class=\"fenge\">机场设置</div>\r\n        <el-divider content-position=\"center\" style=\"position: relative;\"></el-divider>\r\n        <el-container style=\"position: relative;\">\r\n        <el-aside>\r\n            <div style=\"height: 20px\"></div>\r\n         <div class = \"gl\">\r\n          <el-tag style=\"width: 110px; height: 50px\">提示:</el-tag>\r\n          <el-tag style=\"width: 110px; height: 50px\" v-text=\"thehint\"></el-tag>\r\n      </div>\r\n       <div class = \"gl\">\r\n   <el-tag style=\"width: 110px; height: 50px\">出发机场</el-tag>\r\n           <el-tag class = \"startAirport\" style=\"width:110px; height: 50px\" v-text=\"msg\"></el-tag>\r\n      </div>\r\n      <div class = \"gl\">\r\n   <el-tag style=\"width: 110px; height: 50px\">目的机场</el-tag>\r\n           <el-tag class = \"endAirport\" style=\"width: 110px; height: 50px\" v-text=\"emsg\"></el-tag>\r\n      </div>\r\n      <div class = \"gl\">\r\n          <el-time-picker\r\n                  v-model=\"mainForm.value1\"\r\n                  class=\"time_select\"\r\n                  placeholder=\"选择时间\"\r\n                  @change=\"timeSelected\"\r\n                  value-format=\"HH:mm\" format=\"HH:mm\">\r\n          </el-time-picker>\r\n      </div>\r\n      <div class = \"gl\">\r\n          <el-button round @click=\"buttonShow && sure()\" style=\"position: relative\">确定</el-button>\r\n          <el-button round style=\"position: relative\" @click.native=\"toCancel()\">取消</el-button>\r\n          </div>\r\n        </el-aside>\r\n        <el-main class=\"getmain\">\r\n            <el-table\r\n                    :data=\"tableData\"\r\n                    style=\"width: 100%\"\r\n                    max-height=\"250\">\r\n                <el-table-column\r\n                        fixed\r\n                        prop=\"date\"\r\n                        label=\"出发机场编号\"\r\n                        width=\"250\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"name\"\r\n                        label=\"出发机场\"\r\n                        width=\"250\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"province\"\r\n                        label=\"目的机场编号\"\r\n                        width=\"250\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"city\"\r\n                        label=\"目的机场\"\r\n                        width=\"250\">\r\n                </el-table-column>\r\n                <el-table-column\r\n                        prop=\"address\"\r\n                        label=\"出发时间\"\r\n                        width=\"250\">\r\n                </el-table-column>\r\n            </el-table>\r\n        </el-main>\r\n        </el-container>\r\n        <el-divider content-position=\"center\" style=\"position: relative;\"></el-divider>\r\n        <div class=\"fenge\">预测信息</div>\r\n        <el-divider content-position=\"center\" style=\"position: relative;\"></el-divider>\r\n      <div>\r\n      <el-collapse v-model=\"activeNames\" @change=\"handleChange\" class = \"ec\">\r\n          <el-collapse-item title=\"出发机场天气预测\" name=\"1\">\r\n              <el-table :data=\"dateList\" border stripe style=\"position:relative\">\r\n                  <el-table-column type=\"index\"></el-table-column>\r\n                  <el-tableColumn label=\"日期\" prop=\"date\"></el-tableColumn>\r\n              </el-table>\r\n          </el-collapse-item>\r\n          <el-collapse-item title=\"到达机场天气预测\" name=\"2\">\r\n              <el-table :data=\"dateList\" border stripe style=\"position:relative\">\r\n                  <el-table-column type=\"index\"></el-table-column>\r\n                  <el-tableColumn label=\"日期\" prop=\"date\"></el-tableColumn>\r\n              </el-table>\r\n          </el-collapse-item>\r\n          <el-collapse-item title=\"延误预测\" name=\"3\">\r\n              <el-table :data=\"totalList\"  border stripe style=\"position:relative\">\r\n                  <el-table-column type=\"index\"></el-table-column>\r\n                  <el-tableColumn label=\"日期\" prop=\"date\"></el-tableColumn>\r\n                  <el-tableColumn label=\"正常延误概率\" prop=\"normalList.normal_prob\"></el-tableColumn>\r\n                  <el-tableColumn label=\"轻度延误概率\" prop=\"mild_prob\"></el-tableColumn>\r\n                  <el-tableColumn label=\"中度延误概率\" prop=\"moderate_prob\"></el-tableColumn>\r\n                  <el-tableColumn label=\"重度延误概率\" prop=\"serious_prob\"></el-tableColumn>\r\n              </el-table>\r\n          </el-collapse-item>\r\n      </el-collapse>\r\n  </div>\r\n    </el-main>\r\n      <el-footer class=\"mainFoot\">\r\n          <div class=\"kaifa\">国寄纵队小组开发出品</div>\r\n      </el-footer>\r\n  </el-container>\r\n</el-container>\r\n</template>\r\n\r\n<script>\r\n    import Vue from \"vue\";\r\n    import echarts from \"echarts\";\r\n    Vue.prototype.$echarts = echarts;\r\n    import china from \"echarts/map/json/china.json\";\r\n    echarts.registerMap(\"china\", china);\r\n\r\n    export default {\r\n        name: \"main\",\r\n\r\n        data() {\r\n            return {\r\n                mainForm: {\r\n                     showmsg : '',\r\n                     showemsg : '',\r\n                     value1: '',\r\n                },\r\n                adminForm:{\r\n                     username : this.$route.query.username,\r\n                },\r\n                buttonShow : false,\r\n                count: 0,\r\n                thehint : \"请选择出发机场\",\r\n                msg : \"请选择\",\r\n                emsg : \"请选择\",\r\n                activeNames: ['0'],\r\n                dateList :[],\r\n                normalList :[],\r\n                mildList:[],\r\n                moderateListe : [],\r\n                seriousList : [],\r\n                totalList :[],\r\n\r\n            }\r\n\r\n        },\r\n\r\n        mounted() {\r\n            this.getMapChart();\r\n          },\r\n        methods: {\r\n            openMsgHint(msg,data1) {\r\n                this.$confirm('是否选择'+msg+'为出发机场', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                }).then(() => {\r\n                    this.$message({\r\n                        type: 'success',\r\n                        message: '选择成功!',\r\n                    });\r\n                    this.msg = msg;\r\n                    this.mainForm.showmsg=this.getCode(data1,msg);\r\n                    console.log(this.getCode(data1,msg));\r\n                    this.thehint =  \"请选择目的机场\" ;\r\n                    console.log('success');\r\n                }).catch(() => {\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: '已取消选择'\r\n                    });\r\n                });\r\n            },\r\n            openEMsgHint(msg,data1) {\r\n                this.$confirm('是否选择'+msg+'为目的机场', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                }).then(() => {\r\n                    this.$message({\r\n                        type: 'success',\r\n                        message: '选择成功!',\r\n                    });\r\n                    this.emsg = msg;\r\n                    this.mainForm.showemsg=this.getCode(data1,msg);\r\n                    console.log(this.getCode(data1,msg));\r\n                    this.thehint =  \"请选择时间\";\r\n                    console.log('success');\r\n                }).catch(() => {\r\n                    this.$message({\r\n                        type: 'info',\r\n                        message: '已取消选择'\r\n                    });\r\n                });\r\n            },\r\n            handleChange(val) {\r\n                console.log(val);\r\n            },\r\n            timeSelected(){\r\n                alert(\"change\");\r\n                if(this.msg!= \"请选择\" && this.emsg!=\"请选择\"){\r\n                    this.thehint = \"请点击确认\";\r\n                    this.buttonShow = true;\r\n                }\r\n            },\r\n            toCancel() {\r\n                alert(\"取消\");\r\n                this.count= 0;\r\n                this.thehint = \"请选择出发机场\";\r\n                this.msg = \"请选择\",\r\n                this.emsg = \"请选择\";\r\n                return;\r\n            },\r\n            sure () {\r\n                alert(\"确定\");\r\n\r\n\r\n                this.axios.post('http://localhost:5000/delayPredict',this.mainForm).then((resp)=>{\r\n                     let data = resp.data;\r\n                        let that = this;\r\n                     that.dateList = resp.data.date;\r\n                     that.normalList = resp.data.normal_prob;\r\n                     that.mildList = resp.data.mild_prob\r\n                    let tempList = []\r\n                    for(let i = 0;i<7;i++){\r\n\r\n                    }\r\n                     console.log(resp.data.normal_prob);\r\n                    // // for( let i =0; i<15; i++){\r\n                    // //     console.log(data1[0][i].toString());\r\n                    // // }\r\n                    // if(data.toString()!= null){\r\n                    //     this.axios.post('http://localhost:5000/setArriveAirport',this.mainForm).then((resp)=>{\r\n                    //         let data = resp.data;\r\n                    //         if(data.toString()==\"true\"){\r\n                    //             this.axios.post('http://localhost:5000/delayPredict',this.mainForm).then((resp)=>{\r\n                    //                 let data = resp.data;\r\n                    //                 console.log(data);\r\n                    //             })\r\n                    //         }\r\n                    //         this.$message({\r\n                    //             message: '选择成功',\r\n                    //             type: 'success'\r\n                    //         });\r\n                    //     })\r\n                    // }\r\n                })\r\n             },\r\n            checkadd(){\r\n\r\n                this.axios.post('http://localhost:5000/judgeAdmin',this.adminForm).then((resp)=>{\r\n                    let data = resp.data;\r\n                    if(data.toString()==\"true\"){\r\n                     this.$router.push({path:'/Manager'})\r\n                    }else {\r\n                        this.$message({\r\n                                message: '你没有权限',\r\n                                type:'error'\r\n                            });\r\n                    }\r\n                })\r\n            },\r\n            exits(){\r\n                this.$router.push({path: '/'})\r\n            },\r\n            getMapChart() {\r\n                  var hintGroup = this.getHint();\r\n                  var dataValue = this.dealWithData();\r\n                  var data1 = dataValue.splice(0, 27);\r\n                  var myChart = this.$echarts.init(document.getElementById(\"mapChart\"))\r\n                  var option = {\r\n                    tooltip: {\r\n                      show: false,\r\n                    },\r\n                    backgroundColor: \"rgba(0,0,0,0)\",\r\n                    geo: {\r\n                      map: \"china\",\r\n                      roam: false, // 一定要关闭拖拽\r\n                      zoom: 1.23,\r\n                      center: [105, 36], // 调整地图位置\r\n                      label: {\r\n                        normal: {\r\n                          show: false, //关闭省份名展示\r\n                          fontSize: \"10\",\r\n                          color: \"rgba(0,0,0,0.7)\",\r\n                        },\r\n                        emphasis: {\r\n                          show: false,\r\n                        },\r\n                      },\r\n                      itemStyle: {\r\n                        normal: {\r\n                          areaColor: \"#0d0059\",\r\n                          borderColor: \"#389dff\",\r\n                          borderWidth: 1, //设置外层边框\r\n                          shadowBlur: 5,\r\n                          shadowOffsetY: 8,\r\n                          shadowOffsetX: 0,\r\n                          shadowColor: \"#01012a\",\r\n                        },\r\n                        emphasis: {\r\n                          areaColor: \"#184cff\",\r\n                          shadowOffsetX: 0,\r\n                          shadowOffsetY: 0,\r\n                          shadowBlur: 5,\r\n                          borderWidth: 0,\r\n                          shadowColor: \"rgba(0, 0, 0, 0.5)\",\r\n                        },\r\n                      },\r\n                    },\r\n                    legend: {\r\n                      orient: \"horizontal\",\r\n                      height: \"50%\",\r\n                      top: \"0%\",\r\n                      right: \"10%\",\r\n                    },\r\n                    series: [\r\n                      {\r\n                        type: \"map\",\r\n                        map: \"china\",\r\n                        roam: false,\r\n                        zoom: 1.23,\r\n                        center: [105, 36],\r\n                        // geoIndex: 1,\r\n                        // aspectScale: 0.75, //长宽比\r\n                        showLegendSymbol: false, // 存在legend时显示\r\n                        label: {\r\n                          // 显示地图省名称\r\n                          normal: {\r\n                            color: \"#389dff\",\r\n                            formatter: \"{b}\",\r\n                            position: [-12, -1],\r\n                            show: false,\r\n                          },\r\n                          emphasis: {\r\n                            show: false,\r\n                          },\r\n                        },\r\n                        itemStyle: {\r\n                          normal: {\r\n                            areaColor: \"#0d0059\",\r\n                            borderColor: \"#389dff\",\r\n                            borderWidth: 0.5,\r\n                          },\r\n                          emphasis: {\r\n                            areaColor: \"#17008d\",\r\n                            shadowOffsetX: 0,\r\n                            shadowOffsetY: 0,\r\n                            shadowBlur: 5,\r\n                            borderWidth: 0,\r\n                            shadowColor: \"rgba(0, 0, 0, 0.5)\",\r\n                          },\r\n                        },\r\n                      },\r\n                      {\r\n                        name: \"\",\r\n                        type: \"scatter\",\r\n                        coordinateSystem: \"geo\",\r\n                        data: dataValue,\r\n                        symbol: \"circle\",\r\n                        symbolSize: 5,\r\n                        hoverSymbolSize: 10,\r\n                        tooltip: {\r\n                          formatter(value) {\r\n                            return (\r\n                              value.data.name + \"<br/>\"\r\n                            );\r\n                          },\r\n                          show: true,\r\n                        },\r\n                        encode: {\r\n                          value: 2,\r\n                        },\r\n                        label: {\r\n                          formatter: \"{b}\",\r\n                          position: \"right\",\r\n                          show: false,\r\n                        },\r\n                        itemStyle: {\r\n                          color: \"#0efacc\",\r\n                        },\r\n                        emphasis: {\r\n                          label: {\r\n                            show: false,\r\n                          },\r\n                        },\r\n                      },\r\n                      {\r\n                        name: \"显示所有机场\",\r\n                        type: \"effectScatter\",\r\n                        coordinateSystem: \"geo\",\r\n                        data: data1,\r\n                          textColor:\"#000\",\r\n                        symbolSize: 8,\r\n\r\n                        tooltip: {\r\n                          formatter(value) {\r\n                            return (\r\n                              value.data.name + \"<br/>\"\r\n                                // + \"门店数：\" + value.data.value[2]\r\n                            );\r\n                          },\r\n                          show: true,\r\n                        },\r\n                        encode: {\r\n                          value: 2,\r\n                        },\r\n                        showEffectOn: \"render\",\r\n                        rippleEffect: {\r\n                          brushType: \"stroke\",\r\n                          color: \"#0efacc\",\r\n                          period: 9,\r\n                          scale: 5,\r\n                        },\r\n                        hoverAnimation: true,\r\n                        label: {\r\n                          formatter: \"{b}\",\r\n                          position: \"right\",\r\n                          show: true,\r\n                        },\r\n                        itemStyle: {\r\n                          color: \"#0efacc\",\r\n                          shadowBlur: 2,\r\n                          shadowColor: \"#333\",\r\n                        },\r\n                        zlevel: 1,\r\n                      },\r\n                    ],\r\n                  };\r\n                  myChart.setOption(option);\r\n                  myChart.on(\"click\", (params) => {\r\n                    console.log(params.seriesType);\r\n                    if(params.seriesType == \"effectScatter\"){\r\n\r\n                        if(this.thehint == \"请选择出发机场\"){\r\n                        this.openMsgHint(params.name,data1)\r\n                        }\r\n                        else if(this.thehint == \"请选择目的机场\"){\r\n                        this.openEMsgHint(params.name,data1)\r\n                        }\r\n                        else if(this.thehint == \"请点击确认\"){\r\n                            alert(\"请点击确定或取消\");\r\n                            this.buttonShow = false;\r\n                        }\r\n                    }\r\n\r\n                    return;\r\n                    this.$router.push({\r\n                      path: \"/mapEchartProvince\",\r\n                      query: { provinceName: params.data.ename, province: params.name },\r\n                    });\r\n                  });\r\n                  myChart.setOption(option);\r\n                  window.onresize = () => {\r\n                    myChart.resize();\r\n                  };\r\n                },\r\n                 getHint() {\r\n                   var hintsGroup = [\"请选择出发机场\", \"请选择目的机场\", \"请点击确定\" ];\r\n                   return hintsGroup;\r\n                 },\r\n                dealWithData() {\r\n                  var geoCoordMap = [\r\n                    {\r\n                      name: \"罗家机场\",\r\n                      value: [117.18, 29.27, \"JDZ\"],\r\n                    },\r\n                    {\r\n                      name: \"浦东机场\",\r\n                      value: [121.80, 31.16, \"PVG\"],\r\n                    },\r\n                    {\r\n                      name: \"通辽机场\",\r\n                      value: [122.256, 43.62, \"TGO\"],\r\n                    },\r\n                    {\r\n                      name: \"高崎国际机场\",\r\n                      value: [118.03, 24.48, \"XMN\"],\r\n                    },\r\n                    {\r\n                      name: \"地窝堡国际机场\",\r\n                      value: [88.31, 43.36, \"URC\"],\r\n                    },\r\n                    {\r\n                      name: \"武宿国际机场\",\r\n                      value: [112.487, 37.94, \"TYN\"],\r\n                    },\r\n                    {\r\n                      name: \"宝安机场\",\r\n                      value: [113.88, 22.55, \"SZX\"],\r\n                    },\r\n                    {\r\n                      name: \"凤凰国际机场\",\r\n                      value: [109.75, 18.4, \"SYX\"],\r\n                    },\r\n                    {\r\n                      name: \"流亭国际机场\",\r\n                      value: [120.396, 36.9, \"TAO\"],\r\n                    },\r\n                    {\r\n                      name: \"遥墙国际机场\",\r\n                      value: [116.75, 35.8, \"TNA\"],\r\n                    },\r\n                    {\r\n                      name: \"正定机场\",\r\n                      value: [115.0, 40.03,\"SJW\"],\r\n                    },\r\n                    {\r\n                      name: \"桃仙国际机场\",\r\n                      value: [123.47, 41.8,\"SHE\"],\r\n                    },\r\n                    {\r\n                      name: \"虹桥机场\",\r\n                      value: [122.34, 30.196,\"SHA\"],\r\n                    },\r\n                    {\r\n                      name: \"首都国际机场\",\r\n                      value: [116.35, 39.04,\"PEK\"],\r\n                    },\r\n                    {\r\n                      name: \"禄口国际机场\",\r\n                      value: [119.89, 32.33,\"NKG\"],\r\n                    },\r\n                    {\r\n                      name: \"两江国际机场\",\r\n                      value: [110.3, 25.3,\"KWL\"],\r\n                    },\r\n                    {\r\n                      name: \"长水国际机场\",\r\n                      value: [101.82, 24.9, \"KMG\"],\r\n                    },\r\n                    {\r\n                      name: \"太平机场\",\r\n                      value: [126.96, 45.55, \"HRB\"],\r\n                    },\r\n                    {\r\n                      name: \"白塔机场\",\r\n                      value: [111.62, 40.8,\"HET\"],\r\n                    },\r\n                    {\r\n                      name: \"萧山国际机场\",\r\n                      value: [120.21, 28.2,\"HGH\"],\r\n                    },\r\n                    {\r\n                      name: \"长乐国际机场\",\r\n                      value: [119.27, 26.04,\"FOC\"],\r\n                    },\r\n                    {\r\n                      name: \"双流机场\",\r\n                      value: [104.1, 30.66,\"CTU\"],\r\n                    },\r\n                    {\r\n                      name: \"江北机场\",\r\n                      value: [106.54, 29.4,\"CKG\"],\r\n                    },\r\n                    {\r\n                      name: \"合肥机场\",\r\n                      value: [117.3, 31.69,\"HFE\"],\r\n                    },\r\n                    {\r\n                      name: \"新郑国际机场\",\r\n                      value: [113.64, 34.72,\"CGO\"],\r\n                    },\r\n                    {\r\n                      name: \"吐鲁番交河机场\",\r\n                      value: [89.2, 40.94,\"TLQ\"],\r\n                    },\r\n                    {\r\n                      name: \"天河机场\",\r\n                      value: [114.03, 30.58,\"WUH\"],\r\n                    },\r\n                  ];\r\n                  return geoCoordMap;\r\n                },\r\n                 getCode(data2,name1){\r\n                 for(let i = 0;i < data2.length;i++){\r\n                     if(data2[i].name == name1){\r\n                         return data2[i].value[2];\r\n                     }\r\n                 }\r\n                 return \"out\";\r\n                 },\r\n              },\r\n\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .fenge{\r\n        text-align: center;\r\n        font-size: 40px;\r\n        background: #409EFF;\r\n        color: #fff;\r\n    }\r\n    .getmain{\r\n        height: 300px;\r\n    }\r\n\r\n    .chartBox {\r\n  width: 100%;\r\n  height: 100vh;\r\n}\r\n\r\n    #mapChart {\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n     .head-bread{\r\n        position: relative;\r\n         color: #fff;\r\n         font-size: 20px;\r\n    }\r\n     .el-dropdown-link {\r\n        cursor: pointer;\r\n        color: #fff;\r\n         font-size: 30px;\r\n         line-height:1.7;\r\n      }\r\n      .el-icon-arrow-down {\r\n        font-size: 30px;\r\n      }\r\n     .gl{\r\n        text-align: center;\r\n    }\r\n    .gl2{\r\n        text-align: center;\r\n    }\r\n    .logo{\r\n        max-width:100%;\r\n        height:auto;\r\n    }\r\n    .kaifa{\r\n        margin:0px auto 40px auto;\r\n        text-align: center;\r\n        font-size: 20px;\r\n        line-height:60px;\r\n        color: #fff;\r\n        font-family: \"Helvetica Neue\";\r\n    }\r\n    .el-icon-help{\r\n        text-align: center;\r\n        font-size: 35px;\r\n        color: #fff;\r\n        font-family: \"Helvetica Neue\";\r\n        line-height:1.7;\r\n    }\r\n    .mainHead{\r\n        background: #409EFF;\r\n        display: flex;\r\n        justify-content: space-between;\r\n    }\r\n    .mainAside{\r\n        width: 1000px;\r\n        background: #4169E1;\r\n    }\r\n    .mainMain{\r\n        background: #87CEFA;\r\n        height:800px;\r\n        flex-grow:1;\r\n        background-image: url(\"../assets/bg.jpg\");\r\n        background-size:cover;\r\n        background-repeat: no-repeat;\r\n    }\r\n    .mainFoot{\r\n        background: #409EFF;\r\n    }\r\n    .ec{\r\n        position: relative;\r\n    }\r\n    .time_select{\r\n        max-width:100%;\r\n        height:auto;\r\n\r\n    }\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}